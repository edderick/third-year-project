\documentclass[12pt]{report}
\usepackage[utf8]{inputenc}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\author{Edward Seabrook} 
\title{Third Year Project Progress Report}

\usepackage{nomencl}
\makenomenclature

% Makes Chapter heading look like Section heading
\usepackage{titlesec}
\titleformat{\chapter}% reformat chapter headings
    [hang]% like section, with number on same line
    {\Large\bfseries}% formatting applied to whole
    {\thechapter}% Chapter number
    {0.5em}% space between # and title
    {}% formatting applied just to title

% Save a bit of space by giving all headings less room
\titlespacing*{\chapter}{0pt}{0pt}{0pt}
\titlespacing*{\section}{0pt}{0pt}{5pt}
\titlespacing*{\subsection}{0pt}{0pt}{5pt}
\titlespacing*{\subsubsection}{0pt}{0pt}{5pt}
\titlespacing*{\paragraph}{0pt}{0pt}{5pt}

% Set margins to required
\usepackage[top=2.4cm, bottom=2.4cm, left=3.5cm, right=2.4cm]{geometry} 

% Sort out margins for todonotes
\setlength{\marginparwidth}{3cm}
\reversemarginpar

% Set paragraph spacing to required
\setlength\parindent{0pt}
\usepackage[parfill]{parskip}

\usepackage{hyperref}
\usepackage{todonotes}
\usepackage{listings}
\usepackage{appendix}
\usepackage{pdflscape}
\usepackage{cite}

% Not totally sure
\usepackage{fancyhdr} 
\pagestyle{fancy} 
\renewcommand{\headrulewidth}{0pt} 
\lhead{}\chead{}\rhead{}
\lfoot{}\cfoot{\thepage}\rfoot{}

% Number and show in ToC to a deeper level
\setcounter{secnumdepth}{3}
\setcounter{tocdepth}{3}

\def\nomlabel#1{\textbf{#1}\hfil}


\begin{document}

% Include title page
\input{./Title.tex}

\begin{abstract}
As home networks become more and more complex, it is inevitable that they will
require splitting into multiple subnets. As the average home user is unable to
configure a router, a minimal configuration solution is required. In this
project I produced an implementation zero configuration OSPF based on drafts
published by the IETF. 
\end{abstract}

\tableofcontents
\clearpage

\chapter{Acknowledgements}

\begin{itemize}
\item Tim Chown - Offered support as project supervisor
\item David Lamparter - Responded to my queries about how Quagga works
\item Jari Arkko - Wrote the drafts that I was implementing

\item Markus Stenberg \& Benjamin Paterson - Provided implementations against which to interop test
\end{itemize}

\chapter{Introduction}
A clear statement of the problem and goals of the project.

Start with a general overview of home networking. Futuristic network schpiel.

\section{IPV6}
To comminicate with a computer, we need a way to uniquely identify it. At
present, IPV4 is the dominating technology for addressing computers on the
internet. Unfortunately when IPV4 was designed, it was not forseeable that we
would need more than 4 billion addresses, so a neat 32 bit identifier was used.
In 2011 however, IANA ran out of IPV4 addresses. 

One solution to the IPV4 address space exhaustion problem is migration to
IPV6; a protocol that is fundamentally similar to IPV4, but instead uses 128
bit addresses. This gives us far more addresses to work with - in fact a total
of $3.4028237\times10^{38}$ unique addresses. With estimates for the total
number of grains of sand on Earth being around $7.5\times10^{18}$, the number
of stars visible from Earth falling at about $7.0\times10^{22}$, and more
relevently the estimated human population of Earth being $7.0\times10^{9}$,
this address space should be sufficient for atleast the forseeable future. 

\begin{itemize}
\item IPv4 Address space exhaustion
\item Bag of sand - address each robot with IPV6?
\item Always hand out a /64 to a network.
\end{itemize}

\section{Routing}
Explain what routing is:

For packets of data to find their way around networks, they require
routing. The routing we are concerned with is Layer 3 routing. When an IP
packet is sent, it's address is compared with those stored in the kernel's
routing table, and then transmitted using the appropriate interface. Networks
contain many computers whose sole purpose is to forward network traffic, the
computers are known as routers. 

A number of different protocols exist to build up these routing tables:

\subsection{Interior gateway protocols}
Interior Gateway Protocols (IGPs) are concerned with building the routing
tables for a single autonomous system (AS). 

\subsubsection{Distance Vector}
Distance vector routing works by having each router advertise to its neighbors
(Directly connected routers) the shortest path it knows about to each subnet.
Although less complex that Link-state routing Protocols, they are often slower
to converge, and experience what is know as the ``count to infinity'' problem
whereby loops in the network topology can lead to weights increasing to
infinity when a router goes down. 

The most common Distance Vector protocol is Routing Information Protocol (RIP),
a routing protocol famous for defining 15 as infinity. IGRP and EIGRP are
Cisco's own propriety alternatives.

\subsubsection{Link-State}
Link state routing protocols work by allowing each router on the network to get
a full understanding of the network topology. From this representation of the
networks topology, the router then performs some calculations to work out the
best route. The two most common Link-State routing protocols, OSPF and IS-IS,
both use Dijkstra's algorithm to calculate these shortest paths. 

OSPF and IS-IS are both very similar protocols, the main difference is that
IS-IS is as a Layer 2 protocol is Layer 3 agnostic, whereas OSPF is depended on
IPV4 or IPV6 depending on the version.

\subsection{Exterior Gateway Protocols}
Not concerned with Exterior Gateway Protocols (EGP), the main example being
Border Gateway (BGP). These kinds of protocols are more concerned with policy
than the technical distance of the destinations.

\begin{itemize}
\item Links state - OSPF: each router knows whole topology
\item Distance Vector - RIP): each router advertises how far away destinations are
\item Really want to mention BATMAN. ;)
\end{itemize}

\section{Present}
Need some text to go here because you can't just have two heading back to back!!

\subsection{Home}
Modern home and small/home office (SOHO) networks all tend to follow the same
patterns. A single ISP provides a connection to the internet using the phone
line or television cable.  The ISP will typically provide a single IPV4 address
(/32), usually this is an unstable (dynamic) allocation although a static IP is
often offered as a premium service. 

To allow multiple hosts on the network, Network Address Translation (NAT) is
usually employed. With NAT, the router rewrites the address of the packets from
the globally allocated IP address to a local address often in the subnet
192.168.1.0/24. The port number is often used to multiplex between the
different hosts on the network. To allow applications like Skype to function
upnp is often used. 

The solution is usually provided as a single item of Customer Premises
Equipment (CPE), refered to a a ``HomeHub'', ``SuperHub'', ``WirelessBox'' or
simply ``Router''. This device provides the modem for connecting to the
internet, an Ethernet switch with around 4 ports, and a wireless access point
(802.11x) that is usually bridged to the wired network to provide just one
subnet. 

\subsection{Campus and Enterprise}
Larger networks like the ones found on University Campuses and Larger
Businesses tend to employ many of the more advanced features of networking.
They are often split into many subnets depending on the physical locations,
workgroups and expected use of the hosts. 

Many organisations were able to obtain large chunks of IPV4 address space, the
University of Southampton was able to obtain a /16 (152.78.0.0) giving them
around 65000 addresses to play with. Having this many addresses allows each
machine on the network to be globally addressable - people's initial reaction
to this is often that it would be insecure, but a good firewall is far more effective
protection than NAT. Even with this many addresses, the University still
struggles. This is due at part to address space wastage, the now deprecated ISS
wireless service still takes up a large proportion of the address space. 

Although it is not yet a common sight, the networks run by ECS are dual stack,
meaning the machines are allocated both IPV4 and IPV6 addresses. This
demonstrates than IPV6 is mature enough to be deployed in large networks.

It should be noted however, that at the moment, to run a network the size of
the University's, many specialist staff are required to configure the network
and ensure its day to day running. This is something that the vast majority of
households are not able to obtain.

\section{Future}
In the future users will want more from their home networks. We are likely to
see a dramatic increase in the number of devices in the average home, ranging
from more laptops and tablets, to more sensors and home automation devices.
As these types of traffic may be heterogeneous, it would be beneficial to split
the network up into multiple subnets to ensure the best performance from each
network. 

Guest networks are already an option provided by many high end wireless access
points. By using Virtual Access Points (VAPs) guest clients can connect to the
internet, but are restricted from having full access to the local network. To
facilitate this, hard coded local IPV4 addresses are usually used, with the
advent of IPV6 and globally valid addresses, a mechanism to assign IP addresses
and route traffic is required.  


\begin{itemize}
\item Multiple subnets. 
\item Homenet WG? Finding solutions to the above problem

/* Don't directly mention drafts, just problems they solve. */

\item autoconf - The main draft, Router IDs \& and extensible platform for adding more autoconf stuff to.
\item prefix delegation - The bulk of the work!
\end{itemize}

\section{Goals}
Good software shouldn't be visible to it's users

==$>$ Just plug the devices in and it's good to go. 

==Emphasise bleeding edge?==

\chapter{Literature Review} 
A review of the \textbf{background} literature

=$>$ Could go on forever. Need to be consice. 

---$>$ Probably want to talk about other stuff

Required In depth discussion:
\begin{itemize}
\item Draft IETF autoconf 
\item Draft Jarri PD
\end{itemize}

Worthy of an honorable mention:

\begin{itemize}
\item draft-CHOWN - Puts forward a vision of future home networking
\item RFC2328 - OSPFv2 - Studied in depth to understand how the ospf Protocol works. Lot of stuff about Areas that I don't need\ldots
\item RFC5340 - OSPFv3 - Studied in depth. Explains the diference between an OSPFv3 implementation and and OSPFv2.
\item draft-dimitri-zOSPF - An old draft that had similar aims.
\item RFC5329 - OSPFv3-TE - Allows network wide QoS type stuff. Not sure why interesting anymore :p
\item RFC5250 - Opaque LSAs - A generic type of LSA. 
\end{itemize}

Books:

\begin{itemize}
\item Good for getting a general overview
\item Clarify things from the RFCs 
\item THEY DON'T COVER ANY OF THE NEW STUFF COZ IT'S BLEEDIN' EDGE!!one
\end{itemize}

\chapter{Analysis}
An analysis and specification of the solution to the problem

\section{Alternatives}
Chat about possible alternatives to this solution

\subsection{DHCP-PD}
Main realistic alternative

Issue of hierachical delegation (Inefficient use of address space)

--Stateless \& Statefull + SLAAC?

\subsection{Manual Configuration?}
Possible, but users won't find it all that easy!

\section{How OSPF works}
Show that I understand fully how OSPF works. 

--$>$ Mention v2 \& v3

Details of the core LSA types. Mention the other LSAs

- Network, Router 

- Top->Area->Interface

\section{Implementation Candidates}
=== Does a comparison of the routing daemons go in here?

\subsection{Bird}
Lighterweight. C. Talk about Ben and Markus's implementations.

\subsection{Quagga}
Fairly heavy weight, extensible, C, No implementation. Very active project

\subsection{XORP}
XORP => Heaviest weight C++ No implementation. A dying project.

\section{Chosen Implementation}
Why did I chose quagga?

\begin{itemize}
\item Mailing list
\item Separation of v2 and v3
\item No existing implementation =$>$ more useful to the community
\end{itemize}

= A hand wavy explanation?

\chapter{Design}
A detailed design

= Discuss How it actually all works?

--$>$ Only one area!

\section{New LSA Type}
To do what we gotta do, we add the LSA type Auto Configuration LSA. 

Diagram time (Use a simple ASCII diagram maybe?)

\subsection{TLVs}

Type-Length-Values the payload of the AC LSA. 

Extensible

\subsubsection{Router-Hardware-Fingerprint TLV}

Explain what the TLV contains. No need to talk about how it is generated.

\subsubsection{Aggregated Prefix TLV}

Shorter than /64 

Assignments made from it

\subsubsection{Assigned Prefix TLV}

Exactly /64 

Assigned to an interface

\chapter{Implementation}
The implementation

+ How I actually did the dirty

\section{Core algorithms?}

\begin{itemize}
  \item Router Hardware Fingerprint Generation
  \item Router ID Conflict Resolution
  \item Prefix Assignment
  \item Prefix Conflict Resolution
  \item ULA Generation
\end{itemize} 

*Talk about the style of Quagga's code?
Cite the Hacking Guide and the GNU coding standards.

- The issues that I found
    Little Endian vs Big Endian
    
-Chat about C?

= I would like to have something about C

\begin{itemize}
  \item Structs
  \item MEMORY LEAKS?
  \item Lack of Objects - How do you write clean code without objects
\end{itemize}

\chapter{Testing}
Testing strategy and results

Should I put about the tunnel broker in here?

\section{Netkit} 
Made testing fresh and easy. 

REALLY LET TIM KNOW HOW GOOD IT IS!

Stick a screen shot in the appendix :)

\section{Tunnel Broker}
Should I talk about how I configured it all to work with a tunnel broker here?

Using Hurricane Electrics Tunnel broker service, I was able to give my network
truely global connectivity

\section{Alix2d3}
Bit harder, but still did it anyway.

\section{Interoperability}

Tested against other existing implementations.

Assertions -$>$ IF I actually put some in my code\ldots

\textbf{DO I NEED UNIT TESTS?}

\chapter{Project Management}
/* Might be able to sneak this bit into the Appendix */

\section{Gantt Charts}
The most exciting part of this document!

\section{Tools}
With a project like this, there must be lots of tools used. 

\subsection{Git}
You need a version control system!

GitHub is really good. And I'm pretty sure they put a lot of effort into backup.

\subsection{Trello}
Gotta love that task management system

\section{Risk Assesment}
Asses that risk; Like a Boss

\chapter{Evaluation}
A critical evaluation

\section{What Went Well?}

\begin{itemize}
\item Wrote loads of C
\item Ended up with something that seems to work.
\end{itemize}

\section{What Could Have Gone Better?}

\begin{itemize}
\item Not much really :p
\item Could have spoken more to Jarri
\item More feedback from community??
\end{itemize}

\chapter{Conclusions And Future Work}
Conclusions and future work

\section{Conclusions}

It is possible to do

Some things aren't very prescriptive in the draft

\begin{itemize}
\item It works! 
\item Release source code to community
\item Code reviews
\item Attend IETF 87
\end{itemize}

\section{Future Work}
Some things I have thought about, but haven't actually done yet.

\section{DHCP6-PD}
Would be nice to have quagga intercept DHCP6-PD messages and use the prefixes as aggregated prefixes. 

At the moment I didn't manage to do this and I it was deemed beyond project scope.

\section{Source Based Routing}
I might actually create a branch of my code to do a quick proof of concept. At the moment, 
it would be beyond the scope of the project to implement this. 

\section{Multi-hop Service discovery}
I think that this would be worthy of a third year project on it's own. 
Too little standardization - Really something apple would need to contribute to. 

== I DO WANT TO HAVE A GO AT DOING SERVICE DISCOVERY.
-- There is a possibility I will be able to get an RFC out of it :D :D :D

\section{Realization}
It would be nice to see this kind of system deployed in the home. 
Requires ISPs to start using IPv6.
Outside my control. 
Note: Andrews and Arnold.

=$>$ Things beyond my controls - IPV6 etc

\chapter{References}
References to the literature

\chapter{Appendices}
Appendices providing detailed technical references

\end{document}

